<dom-module id="timeoff-entry">
  <!-- var_TimeOffRequestFlow:begin: "2015-11-30T15:59:42.04Z"
  var_TimeOffRequestFlow:comment_hr: null
  var_TimeOffRequestFlow:comment_manager: null
  var_TimeOffRequestFlow:comment_requester: null
  var_TimeOffRequestFlow:end: "2015-11-30T15:59:42.04Z"
  var_TimeOffRequestFlow:manager: null
  var_TimeOffRequestFlow:numberFamilyReason: null
  var_TimeOffRequestFlow:numberRTT: null
  var_TimeOffRequestFlow:numberUnpaid: null
  var_TimeOffRequestFlow:numberVacation: "10" -->
  <link rel="import" type="css" href="timeoff-entry.css">

  <template>
    <template is="dom-if" if="{{data}}">
      <div class="timeoff flex-horizontal">
        <div class="beginTime">[[readProperty("begin", "ll")]] - [[readProperty("end", "ll")]]</div>
        <div class="numberVacation">H:[[readProperty("numberHoliday")]]</div>
        <div class="numberRTT">R:[[readInt("numberRTT")]]</div>
        <div class="numberFamilyReason">F:[[readInt("numberFamilyCause")]]</div>
        <div class="numberUnpaid">U:[[readInt("numberUnpaid")]]</div>
        <content></content>
      </div>
    </template>
  </template>
</dom-module>
<script>
  (function() {
    Polymer({
      is: 'timeoff-entry',
      properties: {
        data: {
          type: Object,
          value: null
        }
      },
      readInt: function(prop) {
        return parseInt(this.readProperty(prop)) || 0;
      },
      readProperty: function(prop, format) {
        var val;
        switch (this.data['entity-type']) {
          case "document":
            val = this.data.properties['hrholidayrequest:' + prop];
            break;
          case "task":
          case "workflow":
            val = this.data.variables[prop];
            break;
          default:
            console.log("[timeoff-entry] Unknown entity-type " + this.data['entity-type']);
        }

        if (typeof format === 'undefined') {
          return val;
        } else {
          return moment(val).format(format); // Localized readable format
        }
      }
    });
  }());
</script>
